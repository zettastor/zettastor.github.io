---
import { t } from "i18next";
import i18next from "i18next";
import { Icon } from "astro-icon";

const {} = Astro.props;

---

<section id="diagram3">

  <div class="grid grid-rows-2 grid-flow-col gap-4 text-xs">
    <div class="row-span-2 flex items-center">
      <div class="border m-1 p-1" id="root">pengyun-root</div>
    </div>
    <div class="flex items-center">
      <div class="border m-1 p-1" id="lib">pengyun-lib</div>
    </div>
    <div class="flex items-center">
      <div class="border m-1 p-1" id="dbs">pengyun-dbs</div>
    </div>
    
    <div>
      <div class="m-1 p-1" id="core"><img src="https://github.com/zettastor/pengyun-core/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-core" /></div>
      <div class="m-1 p-1" id="database_core"><img src="https://github.com/zettastor/pengyun-database_core/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-database_core" /></div>
      <div class="m-1 p-1" id="models"><img src="https://github.com/zettastor/pengyun-models/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-models" /></div>
      <div class="m-1 p-1" id="dih_model"><img src="https://github.com/zettastor/pengyun-dih_model/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-dih_model" /></div>
      <div class="m-1 p-1" id="dih_client"><img src="https://github.com/zettastor/pengyun-dih_client/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-dih_client" /></div>
      <div class="m-1 p-1" id="query_log"><img src="https://github.com/zettastor/pengyun-query_log/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-query_log" /></div>
      <div class="m-1 p-1" id="configuration_common"><img src="https://github.com/zettastor/pengyun-configuration_common/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-configuration_common" /></div>
      <div class="m-1 p-1" id="monitor_common"><img src="https://github.com/zettastor/pengyun-monitor_common/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-monitor_common" /></div>
    </div>
    <div>
      <div class="m-1 p-1" id="dnmodel"><img src="https://github.com/zettastor/dbs-dnmodel/actions/workflows/ubuntu20.yml/badge.svg" alt="dbs-dnmodel" /></div>
      <div class="m-1 p-1" id="models_related"><img src="https://github.com/zettastor/dbs-models_related/actions/workflows/ubuntu20.yml/badge.svg" alt="dbs-models_related" /></div>
      <div class="m-1 p-1" id="driver_core"><img src="https://github.com/zettastor/pengyun-driver_core/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-driver_core" /></div>
      <div class="m-1 p-1" id="coordinator"><img src="https://github.com/zettastor/pengyun-coordinator/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-coordinator" /></div>
      <div class="m-1 p-1" id="infocenter"><img src="https://github.com/zettastor/pengyun-infocenter/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-infocenter" /></div>
      <div class="m-1 p-1" id="drivercontainer"><img src="https://github.com/zettastor/pengyun-drivercontainer/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-drivercontainer" /></div>
      <div class="m-1 p-1" id="deployment_daemon"><img src="https://github.com/zettastor/pengyun-deployment_daemon/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-deployment_daemon" /></div>
      <div class="m-1 p-1" id="datanode_core"><img src="https://github.com/zettastor/pengyun-datanode_core/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-datanode_core" /></div>
      <div class="m-1 p-1" id="datanode_service"><img src="https://github.com/zettastor/pengyun-datanode_service/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-datanode_service" /></div>
      <div class="m-1 p-1" id="datanode"><img src="https://github.com/zettastor/pengyun-datanode/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-datanode" /></div>
      <div class="m-1 p-1" id="webservice_adapter"><img src="https://github.com/zettastor/pengyun-webservice_adapter/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-webservice_adapter" /></div>
      <div class="m-1 p-1" id="utils"><img src="https://github.com/zettastor/pengyun-utils/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-utils" /></div>
      <div class="m-1 p-1" id="console"><img src="https://github.com/zettastor/pengyun-console/actions/workflows/ubuntu20.yml/badge.svg" alt="pengyun-console" /></div>
    </div>
  </div>
</section>

<script>
  import LeaderLine from 'leader-line-new';

  function connectElements(id1, id2, opt) {
    new LeaderLine(document.getElementById(id1), document.getElementById(id2), opt);
  }

  let opt1 = {
    size: 1,
    startPlugSize: 1,
    endPlugSize: 1,
   //dash: true,
    path: "straight",
    color: 'rgba(96, 165, 250, 1.0)',
   };

    connectElements("root", "lib", opt1);
    connectElements("root", "dbs", opt1);

    connectElements("lib", "database_core", opt1);
    connectElements("lib", "core", opt1);
    connectElements("lib", "models", opt1);
    connectElements("lib", "dih_model", opt1);
    connectElements("lib", "dih_client", opt1);
    connectElements("lib", "query_log", opt1);
    connectElements("lib", "configuration_common", opt1);
    connectElements("lib", "monitor_common", opt1);

    connectElements("dbs", "dnmodel", opt1);
    connectElements("dbs", "models_related", opt1);
    connectElements("dbs", "driver_core", opt1);
    connectElements("dbs", "coordinator", opt1);
    connectElements("dbs", "infocenter", opt1);
    connectElements("dbs", "drivercontainer", opt1);
    connectElements("dbs", "deployment_daemon", opt1);
    connectElements("dbs", "datanode_core", opt1);
    connectElements("dbs", "datanode_service", opt1);
    connectElements("dbs", "datanode", opt1);
    connectElements("dbs", "webservice_adapter", opt1);
    connectElements("dbs", "utils", opt1);
    connectElements("dbs", "console", opt1);

</script>
